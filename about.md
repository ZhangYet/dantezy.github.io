---
layout: page
title: 张晔
---

-------------------------------------------------------
# 工作经历

- 2015-07-02 至今: 严肃科技后台工程师。

-------------------------------------------------------

# 项目经验

## **prometheus** ENJOY搜索系统

    一个基于 tornado 的服务，为上游的 Java 应用提供 RESTful 接口。第一版的搜索功能基于 sphinx 的倒排索引，后来改用 Elastic Search。我在这个项目中的主要工作是更新、维护索引，实现产品逻辑（搜索排序和产品推荐）。然而这个系统的代码质量很糟糕，相关的推荐部分是数据部门离线算出评分，然后综合索引排序得到的。

## **Eru** ENJOY docker 云平台

1. **eru-core** Eru 调度编排系统

    `go` 开发的调度编排系统，负责根据使用者的需求创建/删除容器。我在该项目的主要工作是实现了一个动态规划算法（有多个版本），该算法可以保障容器“均匀地”分布在不同的节点上。

1. **eru-agent**

    `go` 开发的 agent 组件。部署在各个 docker 服务器上，收集监控指标、日志和健康检查。我实现了监控指标部分的功能。

1. **spike** graphite proxy

    `python` 开发 graphite proxy。其实就是用 `SWGI` 将 carbon-c-relay 的一致哈希算法，实现成 python 版本，这个 proxy 可以允许 graphite 进行横向扩展。

1. **erulb** Eru load balance

    `openresty` 实现的 load balance。开发的时候考虑了一些比较复杂的需求：同一个域名，需要经过一个复杂的规则进行分流，将流量分到多个 app 中，比如先按照 User-Agent 分，然后将分开的流量按照不同的 IP 再次划分（在最开始的规划中，我们甚至考虑了通过 `erulb` 实现灰度发布的功能）。我设计了一套树状的分层规则，这套规则可以实现非常灵活的分流规则。

1. **日志系统**

    最初用 heka 进行日志收集，后来 heka 被弃坑以及我们系统改进之后，我们改用了 `rsyslog` 作为日志收集组件。具体的开发改进见[《Enjoy 日志收集系统》](http://zhangyet.github.io/2016/11/29/log-system/)

## **业务相关**

1. **twilight** 回源服务 —— `openresty` 实现的回源服务。

-------------------------------------------------------
