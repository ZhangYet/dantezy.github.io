---
layout: post
title: "日常 其二——记一个意义重大的星期三"
comments: true
---

周三上午，我发现我们系统有一台做索引的机器硬盘满了。于是申请扩容。为了扩容，我们需要关机。既然要扩容，干脆所有的机器都扩了吧。

我第一次进行停机操作，所以格外小心谨慎。我还特意在第四台索引机（这台机存放的索引没有那么重要）测试了一下，才继续操作其余三台机。没想到还是出事了。

这几台机器为我们的搜索系统提供Sphinx服务，而Sphinx比较蛋疼的一点在于重启的时候容易出问题。于是，我中奖了，还一次中三台。本来按照我们的架构，只要有一台还能动，相关接口还能撑下去。没想到三台一起挂了。

我们的首页挂了有半个小时。

比较惨的是那天我们一个新功能上线，整个技术部门都在赶工。

最后，这次事故的影响一直留到今天。因为今天我才发现，那几台机子上的redis没有启动。

Orz

